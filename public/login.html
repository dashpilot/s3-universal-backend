<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Login - Vercel Style</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family:
					-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell',
					'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
				background-color: #ffffff;
				color: #000000;
				display: flex;
				align-items: center;
				justify-content: center;
				min-height: 100vh;
				padding: 20px;
			}

			.login-container {
				width: 100%;
				max-width: 400px;
			}

			.login-card {
				background: #ffffff;
				border: 1px solid #e5e5e5;
				border-radius: 8px;
				padding: 32px;
				box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
			}

			.login-header {
				margin-bottom: 32px;
				text-align: center;
			}

			.login-logo {
				font-size: 24px;
				font-weight: 600;
				color: #000000;
				margin-bottom: 8px;
				letter-spacing: -0.5px;
			}

			.login-subtitle {
				font-size: 14px;
				color: #666666;
				font-weight: 400;
			}

			.form-group {
				margin-bottom: 20px;
			}

			.form-label {
				display: block;
				font-size: 14px;
				font-weight: 500;
				color: #000000;
				margin-bottom: 8px;
			}

			.form-input {
				width: 100%;
				padding: 10px 12px;
				font-size: 14px;
				line-height: 20px;
				color: #000000;
				background-color: #ffffff;
				border: 1px solid #d1d1d1;
				border-radius: 6px;
				transition:
					border-color 0.2s,
					box-shadow 0.2s;
				font-family: inherit;
			}

			.form-input:focus {
				outline: none;
				border-color: #000000;
				box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
			}

			.form-input::placeholder {
				color: #999999;
			}

			.login-button {
				width: 100%;
				padding: 10px 16px;
				font-size: 14px;
				font-weight: 500;
				color: #ffffff;
				background-color: #000000;
				border: none;
				border-radius: 6px;
				cursor: pointer;
				transition:
					background-color 0.2s,
					opacity 0.2s;
				font-family: inherit;
				margin-top: 8px;
			}

			.login-button:hover:not(:disabled) {
				background-color: #333333;
			}

			.login-button:active:not(:disabled) {
				background-color: #000000;
			}

			.login-button:disabled {
				opacity: 0.5;
				cursor: not-allowed;
			}

			.error-message {
				background-color: #fef2f2;
				border: 1px solid #fecaca;
				color: #991b1b;
				padding: 12px;
				border-radius: 6px;
				font-size: 14px;
				margin-bottom: 20px;
				display: none;
			}

			.error-message.show {
				display: block;
			}

			.success-message {
				background-color: #f0fdf4;
				border: 1px solid #bbf7d0;
				color: #166534;
				padding: 12px;
				border-radius: 6px;
				font-size: 14px;
				margin-bottom: 20px;
				display: none;
			}

			.success-message.show {
				display: block;
			}

			.loading {
				display: inline-block;
				width: 14px;
				height: 14px;
				border: 2px solid #ffffff;
				border-radius: 50%;
				border-top-color: transparent;
				animation: spin 0.6s linear infinite;
				margin-right: 8px;
				vertical-align: middle;
			}

			@keyframes spin {
				to {
					transform: rotate(360deg);
				}
			}
		</style>
	</head>
	<body>
		<div class="login-container">
			<div class="login-card">
				<div class="login-header">
					<div class="login-logo">Log in</div>
					<div class="login-subtitle">Enter your credentials to continue</div>
				</div>

				<div class="error-message" id="errorMessage"></div>
				<div class="success-message" id="successMessage"></div>

				<form id="loginForm">
					<div class="form-group">
						<label for="username" class="form-label">Username</label>
						<input
							type="text"
							id="username"
							name="username"
							class="form-input"
							placeholder="Enter your username"
							required
							autocomplete="username"
						/>
					</div>

					<div class="form-group">
						<label for="password" class="form-label">Password</label>
						<input
							type="password"
							id="password"
							name="password"
							class="form-input"
							placeholder="Enter your password"
							required
							autocomplete="current-password"
						/>
					</div>

					<button type="submit" class="login-button" id="loginButton">Log in</button>
				</form>
			</div>
		</div>

		<script>
			const loginForm = document.getElementById('loginForm');
			const loginButton = document.getElementById('loginButton');
			const errorMessage = document.getElementById('errorMessage');
			const successMessage = document.getElementById('successMessage');

			function showError(message) {
				errorMessage.textContent = message;
				errorMessage.classList.add('show');
				successMessage.classList.remove('show');
			}

			function showSuccess(message) {
				successMessage.textContent = message;
				successMessage.classList.add('show');
				errorMessage.classList.remove('show');
			}

			function hideMessages() {
				errorMessage.classList.remove('show');
				successMessage.classList.remove('show');
			}

			function setLoading(loading) {
				if (loading) {
					loginButton.disabled = true;
					loginButton.innerHTML = '<span class="loading"></span>Logging in...';
				} else {
					loginButton.disabled = false;
					loginButton.textContent = 'Log in';
				}
			}

			loginForm.addEventListener('submit', async (e) => {
				e.preventDefault();
				hideMessages();
				setLoading(true);

				const username = document.getElementById('username').value;
				const password = document.getElementById('password').value;

				try {
					const response = await fetch('/api/login', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json'
						},
						body: JSON.stringify({ username, password })
					});

					const data = await response.json();

					if (response.ok) {
						showSuccess('Login successful! Redirecting...');
						// Redirect to home page or a protected page
						setTimeout(() => {
							window.location.href = '/';
						}, 1000);
					} else {
						showError(data.error || 'Invalid username or password');
						setLoading(false);
					}
				} catch (error) {
					console.error('Login error:', error);
					showError('An error occurred. Please try again.');
					setLoading(false);
				}
			});
		</script>
	</body>
</html>
